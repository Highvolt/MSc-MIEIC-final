\chapter{Results and Analyses} \label{chap:experiments}

\section*{}

In this chapter, some results of experiments done using the approach developed
(~\ref{chap:chap4}) and multiple datasets (with different characteristics).

There are also some experiments in order to understand which values are better
for some parameters and in which situations they work better or worst.

\section{Interval size without segmentation}

To test which interval of time gets better results for predicting time series
used on the approach, a dataset containing real data from 26-09-2013 to
27-01-2014 was used. The interval sizes tested were 4 hours, 6 hours, 8 hours,
12 hours and 24 hours.

For this test only the \emph{Volume Forecasting} phase, was used.

The time intervals used for the test were:
\begin{itemize}
\item case 1 - 26-09-2013 to 26-11-2013 for training;
27-11-2013 to 25-01-2014 for validation;
\item case 2 - 26-09-2013 to 26-12-2013 for training; 27-12-2013 to 25-01-2014
for validation;
\item case 3 - 26-09-2013 to 31-12-2013 for training; 01-01-2014 to 25-01-2014
for validation;
\end{itemize}

On tables ~\ref{tab:case1_interval}, ~\ref{tab:case2_interval} and
~\ref{tab:case3_interval}, for each one of the three cases the error of the
impressions volume forecasting for every test interval is shown.
In every case, the interval that got better results was the 12 hour interval
(minimum \emph{MASE}).

Additional errors values and graphs for this test are available on appendix
~\ref{ap:tests_result}

\begin{table}[!ht]
\footnotesize
\begin{tabular}{c|ccccccccc}
              & 4h baseline & 4h allow drift & 4h     &  & 6h baseline & 6h allow drift & 6h     &  &  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{946.25}           &  & \multicolumn{3}{c}{1358.24}           &  &  \\
RMSE          & 690.87      & 562.80         & 562.80 &  & 945.70      & 742.57         & 742.57 &  &  \\
MASE          & 0.5227      & 0.4397         & 0.4397 &  & 0.3659      & 0.3003         & 0.3003 &  & 
\end{tabular}

\vspace{0.5cm}

\begin{tabular}{c|ccccccccc}
              & 8h baseline & 8h allow drift & 8h     &  & 12h baseline & \color{red}{12h allow drift} & 12h     &  &  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{1785.84}           &  & \multicolumn{3}{c}{2224.74}           &  &  \\
RMSE          & 1150.43     & 955.35         & 955.35 &  & 1555.01     & \color{red}{1233.82}     & 1233.82 &  &  \\
MASE          & 0.2712      & 0.2473         & 0.2473 &  & 0.2253      & \color{red}{0.1967}      & 0.1967 &  & 
\end{tabular}

\vspace{0.5cm}

\begin{tabular}{c|ccc}
              & 24h baseline & 24h allow drift & 24h  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{1946.70}     \\
RMSE          & 2448.97     & 2139.99        & 2139.99   \\
MASE          & 1.4338      & 1.2725         & 1.2725 \\
\end{tabular}

\vspace{0.5cm}

\caption{Case 1: Forecast errors for different interval sizes (best result in
red)}\label{tab:case1_interval}
\end{table}




\begin{table}[!ht]
\footnotesize
\begin{tabular}{c|ccccccccc}
              & 4h baseline & 4h allow drift & 4h     &  & 6h baseline & 6h allow drift & 6h     &  &  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{908.70}           &  & \multicolumn{3}{c}{1293.78}           &  &  \\
RMSE          & 727.31      & 1083.22        & 834.32 &  & 967.46      & 740.73         & 740.73 &  &  \\
MASE          & 0.1922      & 0.3152         & 0.2348 &  & 0.1312      & 0.0947         & 0.0947 &  & 
\end{tabular}

\vspace{0.5cm}

\begin{tabular}{c|ccccccccc}
              & 8h baseline & 8h allow drift & 8h     &  & \color{red}{12h baseline} & 12h
              allow drift & 12h     &  &  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{1691.32}           &  & \multicolumn{3}{c}{2154.85}           &  &  \\
RMSE          & 1205.49      & 999.47        & 999.47 &  & \color{red}{1565.43}    & 1722.83        & 1722.83 &  &  \\
MASE          & 0.0983      & 0.0905         & 0.0905 &  & \color{red}{0.0857}     & 0.0953         & 0.0953 &  & 
\end{tabular}

\vspace{0.5cm}

\begin{tabular}{c|ccc}
              & 24h baseline & 24h allow drift & 24h  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{1752.65}     \\
RMSE          & 2329.76     & 1646.92         & 1646.92   \\
MASE          & 0.4198      & 0.2925         & 0.2925 \\
\end{tabular}

\vspace{0.5cm}

\caption{Case 2: Forecast errors for different interval sizes (best result in
red)}\label{tab:case2_interval}
\end{table}


\begin{table}[!ht]
\footnotesize
\begin{tabular}{c|ccccccccc}
              & 4h baseline & 4h allow drift & 4h     &  & 6h baseline & 6h allow drift & 6h     &  &  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{929.73}           &  & \multicolumn{3}{c}{1334.01}           &  &  \\
RMSE          & 737.22      & 692.61         & 692.61 &  & 985.86      & 930.13        & 930.13 &  &  \\
MASE          & 0.1548      & 0.1441         & 0.1441 &  & 0.1071      & 0.0998        & 0.0998 &  & 
\end{tabular}

\vspace{0.5cm}

\begin{tabular}{c|ccccccccc}
              & 8h baseline & 8h allow drift & 8h     &  & 12h baseline & \color{red}{12h allow drift} & 12h     &  &  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{1738.75}           &  & \multicolumn{3}{c}{2203.12}           &  &  \\
RMSE          & 1197.45     & 1165.13        & 1165.13  &  & 1581.66     & \color{red}{1453.84}      & 1453.84 &  &  \\
MASE          & 0.0778      & 0.0763         & 0.0763  &  & 0.0695      & \color{red}{0.0595}        & 0.0595 &  & 
\end{tabular}

\vspace{0.5cm}

\begin{tabular}{c|ccc}
              & 24h baseline & 24h allow drift & 24h  \\ \hline
$\sigma$ (Real Data) & \multicolumn{3}{c}{1686.92}     \\
RMSE          & 2275.91     & 2547.73         & 2260.99   \\
MASE          & 0.3304      & 0.3525         & 0.3044 \\
\end{tabular}

\vspace{0.5cm}

\caption{Case 3: Forecast errors for different interval sizes (best result in
red)}\label{tab:case3_interval}
\end{table}


\section{Segmentation}

The experiments described on this section use all the phases of the approach.
This experiments will use datasets generated on artificial environment in order to
test the ability of the approach to capture changes on the volumes of some
characteristics of the dataset.

\subsection*{Without segmentation}

For the first test was used an artificial generated dataset containing a constant overall
volume of impressions, but with the particularity of an increasing volume of
impressions from users using ''Safari 4.0'' browser. 

\begin{figure}[!ht]
\centering
\begin{minipage}[b]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{forecast_12_wo_clustering} \caption[Volume
impression forecast, safari]{Volume impression
forecast, using 12h period without clustering (blue: real; green: forecast)}
\label{fig:vol_safari_12h_wo_clustering}
\end{minipage}
\quad
\begin{minipage}[b]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{safari4_wo_clustering_12} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period without clustering, filtered by "Safari 4.0" (blue: real; green: forecast)}
\label{fig:vol_safari_12h_wo_clustering_safari_4} 
\end{minipage}
\end{figure}



\begin{table}[!ht]
\centering
\footnotesize
\begin{minipage}[b]{0.45\linewidth}
\centering
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
 3.33      & 19.61        & 0.6760   \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using a 12h period without clustering}
\label{tab:err_forecast_12_safari}
\end{minipage}
\quad
\begin{minipage}[b]{0.45\linewidth}
\centering
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
72.28      &  155.42       & 19.5770   \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using a 12h period without clustering, query for ''Safari 4.0''}
\label{tab:err_forecast_12_safari_wo_clustering_safari_4}

\end{minipage}
\end{table}

As shown in the figure~\ref{fig:vol_safari_12h_wo_clustering} and in the
table~\ref{tab:err_forecast_12_safari}, without the segmentation phase the
proposed approach was able to forecast with a small error the behavior of the
impressions on the future.

In order to be able to see the result of the approach for the behavior of the
''Safari 4.0'' users we need to generate a future dataset (last phase of the
approach). The result for the query for the ''Safari 4.0'' browser can be seen
on the figure~\ref{fig:vol_safari_12h_wo_clustering_safari_4}.

As shown on the figure~\ref{fig:vol_safari_12h_wo_clustering_safari_4}, the
dataset generation phased mimic the behavior of that particular characteristic
from the previous week, which in this case is not a good result.

\subsection*{Clustering Baseline}


\begin{figure}[!ht]
\centering
\begin{minipage}[t]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{forecast_12_w_clustering_baseline} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period with baseline clustering  (blue: real; green: forecast)}
\label{fig:vol_safari_12h_w_clustering_baseline}
\end{minipage}
\quad
\begin{minipage}[t]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{forecast_12_w_clustering_baseline_safari4} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period with baseline clustering, filtered by "Safari 4.0" (blue: real; green: forecast)}
\label{fig:vol_safari_12h_w_clustering_baseline_safari_4}
\end{minipage}

\end{figure}

\begin{table}[!ht]
\centering
\footnotesize
\begin{minipage}[t]{0.45\linewidth}
\centering
\footnotesize
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
3.33 & 3.38 & 0.0931 \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using 12h period with baseline clustering}
\label{tab:err_forecast_12_safari_w_clustering_datastream_14}
\end{minipage}
\quad
\begin{minipage}[t]{0.45\linewidth}
\centering
\footnotesize
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
72.28 & 154.99 & 19.5144 \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using 12h period with baseline clustering, filtered by "Safari 4.0"}
\label{tab:err_forecast_12_safari_w_clustering_datastream_14}
\end{minipage}

\end{table}


Placeholder


\subsection*{Segmentation by Parameter}

\subsubsection*{Segmentation by browser}

In order to try to capture this kind of behavior we can use the clustering by
parameter, in this case by the browser attribute, this will forecast the volumes
values for each browser present on the dataset allowing to get better results in
predicting the traffic volumes for each browser.

As we can see on picture~\ref{fig:vol_safari_12h_w_clustering}, the overall error
(table~\ref{tab:err_forecast_12_safari_w_clustering}) for impression volume
forecasting is worst than without the clustering phase this is due to the error
for prediction associated with each cluster is amplified when the data is joined
back together.

\begin{figure}[!ht]
\centering
\begin{minipage}[b]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{forecast_12_w_clustering_per_browser} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period with clustering by the browser attribute (blue: real; green: forecast)}
\label{fig:vol_safari_12h_w_clustering}
\end{minipage}
\quad
\begin{minipage}[b]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{safari4_w_clustering_12} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period with clustering by the browser parameter, filtered by "Safari 4.0" (blue: real; green: forecast)}
\label{fig:vol_safari_12h_w_clustering_safari_4}
\end{minipage}

\end{figure}

\begin{table}[!ht]
\centering
\footnotesize
\begin{minipage}[t]{0.45\linewidth}
\centering

\footnotesize
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
3.33 & 136.78 & 4.4253 \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using a 12h period with clustering by browser attribute}
\label{tab:err_forecast_12_safari_w_clustering}
\end{minipage}
\quad
\begin{minipage}[t]{0.45\linewidth}
\centering
\footnotesize
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
72.28 & 2.58 & 0.2892 \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using a 12h period with clustering by browser attribute, query for ''Safari 4.0''}
\label{tab:err_forecast_12_safari_w_clustering_safari_4}

\end{minipage}

\end{table}

In the other hand, in the
figure~\ref{fig:vol_safari_12h_w_clustering_safari_4}, which show the results
filtered by ''Safari 4.0'' browser, we get a better result prediction for this
characteristic, as shown by the error values on
table~\ref{tab:err_forecast_12_safari_w_clustering_safari_4}. So the
\emph{clustering by parameter} allow to get better prediction for certain
characteristics by capturing the volume for each one in the past and propagate
it into the future.

\subsection*{Using datastream-based clustering}

For values 14.

\begin{figure}[!ht]
\centering
\begin{minipage}[t]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{forecast_12_w_clustering_datastream_14} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period with clustering based datastream-based clustering,
with a \emph{threshold} of 14 maximum distance  (blue: real; green: forecast)}
\label{fig:vol_safari_12h_w_clustering_datastream_14}
\end{minipage}
\quad
\begin{minipage}[t]{0.45\linewidth}
\includegraphics[width=0.96\textwidth]{safari4_w_clustering_12_datastream14} \caption[Volume
impression forecast, safari 4]{Volume impression
forecast, using 12h period with clustering based datastream-based clustering,
with a \emph{threshold} of 14 maximum distance, filtered by "Safari 4.0" (blue: real; green: forecast)}
\label{fig:vol_safari_12h_w_clustering_datastream_14_safari_4}
\end{minipage}

\end{figure}

\begin{table}[!ht]
\centering
\footnotesize
\begin{minipage}[t]{0.45\linewidth}
\centering
\footnotesize
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
3.33 & 50.41 & 1.6226 \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using 12h period with clustering based datastream-based clustering,
with a \emph{threshold} of 14 maximum distance }
\label{tab:err_forecast_12_safari_w_clustering_datastream_14}
\end{minipage}
\quad
\begin{minipage}[t]{0.45\linewidth}
\centering
\footnotesize
\begin{tabular}{ccc}
 $\sigma$ (Real Data) & RMSE & MASE   \\ \hline
72.28 & 84.78 & 10.5275 \\
\end{tabular}

\vspace{0.5cm}

\caption[Volume
impression forecast, safari]{Error for impression volume
forecast, using 12h period with clustering based datastream-based clustering,
with a \emph{threshold} of 14 maximum distance, filtered by "Safari 4.0"}
\label{tab:err_forecast_12_safari_w_clustering_datastream_14}
\end{minipage}

\end{table}


Placeholder

